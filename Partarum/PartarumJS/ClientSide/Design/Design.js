var E=Object.defineProperty;var _=(u,e,t)=>e in u?E(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t;var s=(u,e,t)=>(_(u,typeof e!="symbol"?e+"":e,t),t);var B=class{constructor(e,t,i,a){this.mediaBox=document.getElementById(e),this.boxID=t,this.box=document.getElementById(t),this.event=i,this.type=a,(async()=>{let o,h,l,p,m=!1;switch(this.type){case"mouseover":o=await this.firstStep(),h=o===!0?await this.secondStep():!1,l=h===!0?await this.thirdStep():!1,p=l===!0?await this.fourthStep():!1,m=p===!0?await this.fifthStep():!1;break;case"click":h=await this.secondStep(),l=h===!0?await this.thirdStep():!1}})().then()}firstStep(){return new Promise(e=>{let t=Partarum.Cache.EventCache.getThemeIDs("MediaBoxPicture","MediaBoxPicture_mouseover");for(let i of t)document.getElementById(i[1]).removeEventListener("mouseover",Partarum.Cache.EventCache.getEvent("MediaBoxPicture","MediaBoxPicture_mouseover",i[0]));e(!0)})}secondStep(e){return new Promise(t=>{(()=>new Promise(a=>{for(let c of this.mediaBox.children)c.id!==this.boxID&&c.classList.add("news-box-zeroBox"),this.box.scrollIntoView({block:"start",behavior:"smooth"});a()}))().then(()=>{for(let a of this.mediaBox.children)a.id!==this.boxID&&a.classList.add("news-box-zero"),this.box.scrollIntoView({block:"start",behavior:"smooth"});t(!0)})})}setButtonBox(){let e="ButtonBox_"+this.box.id;if(this.buttonBox=document.getElementById(e),!this.buttonBox){let t=new Partarum;t.themes=[{buttonBox:{config:{footer:{_attributes:{class:"box-row box-center-center",style:"margin:auto; font-size: 3em; color: darkred;",id:"ButtonBox_"+this.box.id},i:{_attributes:{class:"fa-duotone fa-circle-xmark",id:"ButtonBox_"+this.box.id+"_close",addEvent:{type:"click",topic:"MediaBoxPicture",theme:"MediaBoxPicture_ButtonBox_click",name:"MediaBoxPicture_ButtonBox_"+this.box.id+"_click",targetID:"MediaBoxPicture_ButtonBox_"+this.box.id,doThat:()=>{let i=document.getElementById("ButtonBox_"+this.box.id);i.classList.remove("box-row"),i.classList.add("zero"),this.box.classList.remove("news-box-open");for(let a of this.mediaBox.children)a.classList.remove("news-box-zero"),a.classList.remove("news-box-zeroBox"),a.classList.remove("news-box-open")}}}}}},parent:this.box}}],t.create().then()}}thirdStep(){return new Promise(e=>{localStorage.setItem("boxFocus","1"),this.box.classList.remove("news-box-zero"),this.box.classList.remove("news-box-zeroBox"),this.box.classList.add("news-box-open"),this.box.style.position="relative",this.box.scrollIntoView(),e(!0)})}fourthStep(){return new Promise((e,t)=>{let i=this.box.id+"_mouseout";Partarum.Cache.EventCache.create("MediaBoxPicture","MediaBoxPicture_mouseout"),Partarum.Cache.EventCache.setEvent({topic:"MediaBoxPicture",theme:"MediaBoxPicture_mouseout",name:i,targetID:this.box.id,bubbles:!0,doThat:a=>{if(console.log("mouseout - soll: "+this.box.id+" - ist: "+a.target.id),a.target.parentElement.id==="mediaBox"){this.mediaBox.style.flexDirection="row",this.box.classList.remove("news-box-open"),this.whileCounter??=0,this.whileCounter++,console.dir(this.whileCounter),this.buttonBox&&(this.buttonBox.remove("box-row"),this.buttonBox.classList.add("zero"));for(let o of this.mediaBox.children)o.classList.remove("news-box-zero"),o.classList.remove("news-box-zeroBox"),o.classList.remove("news-box-open");let c=Partarum.Cache.EventCache.getThemeIDs("MediaBoxPicture","MediaBoxPicture_mouseout");for(let o of c)this.box.removeEventListener("mouseout",Partarum.Cache.EventCache.getEvent("MediaBoxPicture","MediaBoxPicture_mouseout",o[0]),!1)}}}),setTimeout(()=>{this.box.addEventListener("mouseout",Partarum.Cache.EventCache.getEvent("MediaBoxPicture","MediaBoxPicture_mouseout",i),!1),e(!0)},500)})}fifthStep(){return new Promise(e=>{setTimeout(()=>{let t=Partarum.Cache.EventCache.getThemeIDs("MediaBoxPicture","MediaBoxPicture_mouseover");for(let i of t)document.getElementById(i[1]).addEventListener("mouseover",Partarum.Cache.EventCache.getEvent("MediaBoxPicture","MediaBoxPicture_mouseover",i[0]),{once:!0});e(!0)},500)})}clickOn(){}clickOff(){}mouseoverOn(){}mouseoverOff(){}mouseoutOn(){}mouseoutOff(){}},b=class{static enlarge(e,t,i){console.dir(i);let a=new B("mediaBox",t,e,i)}};var d=class{constructor(e){this.getBackground()}static create(e){return Partarum.hasBackground=!1,new d(e).menu()}menu(){return{nav:{_attributes:{class:"box-row picture-menu"},button_shrink:this.shrink(),button_enlarge:this.enlarge()}}}enlarge(){return{_attributes:{text:"Bild vergr\xF6\xDFern"},i:{_attributes:{class:"fa-duotone fa-magnifying-glass-plus"}}}}shrink(){return{_attributes:{text:"Bild verkleinern"},i:{_attributes:{class:"fa-duotone fa-magnifying-glass-minus"}}}}getBackground(){let e=["background-color","background-image"];if(Partarum.hasBackground===!1){let t=window.getComputedStyle(document.body),i=window.getComputedStyle(document.getElementsByTagName("main")[0]);for(let a of e)console.log("body - "+a+": "+t.getPropertyValue(a)),console.log("main - "+a+": "+i.getPropertyValue(a));Partarum.hasBackground=!0}}};var x=class{constructor(e){if(console.dir(e),this.boxConfig=e.boxConfig||null,this.boxConfig.template.PartarumTemplate){let t=this.boxConfig.template.PartarumTemplate;this.id=t.id,this.templateClass=t.templateName,this.cc=this.templateClass.configCache[this.id],this.PartarumTemplate=!0}this.boxValues=e.boxValues,this.Event=new b,this.filterObject()}filterObject(){this.boxConfig&&(this.templateName=this.PartarumTemplate?this.templateClass.name:this.boxConfig.templateName,this.boxEvents=this.boxConfig.events||null,this.barrier=this.boxConfig.barrier||!1)}mainTemplate(){return{_attributes:{class:"main-article media-box media-box-medium",id:"mediaBox"}}}createValueUser(){}createValueTemplate(){}createValue(){this.PartarumTemplate?this.createValueTemplate():this.createValueUser(),this.surfaceValue=this.mainTemplate();let e=1;if(this.boxValues)for(let t of Object.keys(this.boxValues)){let i="mediaBox_box_"+e,a="section_"+e;if(this.PartarumTemplate){Reflect.set(this.cc,i,this.templateClass.create(this.cc.config));let c=this.cc[i].PartarumIntern;if(this.templateName==="MediaBoxPicture"){let l="mediaBox_picture_"+e;if(Reflect.defineProperty(this.boxValues[t].$picture,"id",{value:l}),c.events){this.cc[i].figure.img._attributes.addEvent=[];for(let p in c.events){let m={topic:"MediaBoxPicture",targetID:l};switch(p){case"enlarge":let v=c.events[p]==="barrier"?"click":"mouseover";m.type=v,m.theme="MediaBoxPicture_"+v,m.name=l+"_"+v,m.doThat=g=>{b.enlarge(g,i,v)}}console.dir(m),this.cc[i].figure.img._attributes.addEvent.push(m)}}Reflect.deleteProperty(this.cc[i],"PartarumIntern")}let o={_attributes:{class:this.barrier===!0?"picture-box-barrier":"picture-box",id:i}};if(this.barrier===!0){let l=d.create();Reflect.set(o,"nav",l.nav)}let h={template:{name:i,surface:this.cc[i],valueFile:this.boxValues[t]}};Reflect.set(o,"_import",h),Reflect.set(this.surfaceValue,a,o),e++}}return this.surfaceValue}static create(e){return new x(e).createValue()}static init(){}static typePicture(){}};var n=class{constructor(e,t=!1){this.headline=e.headline||n.HEADLINE_UNDER_IMAGE,this.picture=e.picture||n.STYLE_ORIGINAL,this.barrier=t,this.events=e.events||null,this.events&&(this.enlarge=this.events.enlarge||null)}headlineTemplate(){return{h2:{$headline:{_type:"text"}}}}imageTemplate(){return{img:{$picture:{src:{_type:"_attributes",_value:{src:""}},alt:{_type:"_attributes",_value:{alt:""}},id:{_type:"_attributes",_value:{id:""}}},_attributes:{}}}}figcaptionText(){return{p:{$description:{_type:"text"}}}}figcaptionTemplate(){let e={};return this.headline===n.HEADLINE_UNDER_IMAGE&&Reflect.set(e,"h2",this.headlineTemplate().h2),Reflect.set(e,"p",this.figcaptionText().p),{figcaption:e}}figureBody(){let e={};return this.headline===n.HEADLINE_OVER_IMAGE&&Reflect.set(e,"h2",this.headlineTemplate().h2),Reflect.set(e,"img",this.imageTemplate().img),Reflect.set(e,"figcaption",this.figcaptionTemplate().figcaption),e}template(){let e={figure:{...this.figureBody()},PartarumIntern:{template:"MediaBoxPicture"}};if(this.events){e.PartarumIntern.events??={};for(let t in this.events)Reflect.set(e.PartarumIntern.events,t,this.events[t])}return e}static create(e){return new n(e).template()}static init(e){let t="mediaBox_"+n.counter;return Reflect.set(n.configCache,t,{config:e}),{PartarumTemplate:{templateName:n,id:t}}}},r=n;s(r,"STYLE_ORIGINAL",2),s(r,"STYLE_MOVIE",4),s(r,"HEADLINE_OVER_IMAGE",8),s(r,"HEADLINE_UNDER_IMAGE",16),s(r,"configCache",{}),s(r,"counter",1);var f=class{static MediaBox(e){return x.create(e)}static MediaBoxPicture(e){return r.init(e)}};s(f,"STYLE_ORIGINAL",2),s(f,"STYLE_MOVIE",4),s(f,"HEADLINE_OVER_IMAGE",8),s(f,"HEADLINE_UNDER_IMAGE",16);export{f as Design};
//# sourceMappingURL=Design.js.map
